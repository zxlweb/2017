<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"/>
    <script src="../react-15.3.1/build/react.min.js"></script>
    <script  src="../react-15.3.1/build/react-dom.min.js"></script>
    <script  src="../react-15.3.1/build/borwser-min.js"></script>
</head>
<body>
<div id="root">
    <!-- This element's contents will be replaced with your component. -->
</div>
<script type="text/babel">

  function FormattedDate(props){
   return <h2>It is {props.date.toLocaleTimeString()}.</h2>
  }
    {/*conver a Function to Class*/}
    class Clock extends React.Component {
        /*创建一个构造函数*/
        constructor(props){
            super(props);
            this.state={date:new Date()}
        }

        tick() {
            this.setState({
                date: new Date()
            });
        }
        /*在react组件被挂载到DOM后调用*/
        componentDidMount(){
           var dom=ReactDOM.findDOMNode(this);
           console.log(dom);
            this.timerID=setInterval(
                    ()=>this.tick(),1000
        );

        }
        componentWillUnmount(){
            clearInterval(this.timerID);
        }
        render() {
            return (
            <div>
            <h1>Hello, world!</h1>

            <FormattedDate date={this.state.date}/>
            </div>
        );
        }
    }

    ReactDOM.render(<Clock/>,document.getElementById('root'))

    {/*
     *recap and the order in which the menthods are called
      （1）当<Clock/>传给ReactDOM.render()时，会调用构造函数，初始化this.state;
      （2）调用render(),在网页上输出想要的内容
      （3）当react组件插入到DOM后，调用componentDidMount(),在这个方法内创建一个，浏览器会创建一个定时器，每隔1s都会调用一次tick()
      （4）浏览器每隔1s中调用一次tick()，通过setState()来改变state的值，当state值发生改变的时候，会调用render()，更新输出
      （5）如果时间组件从DOM中删除，React会调用componentWillUnmount()方法来清除定时器
    */}
</script>
</body>
</html>